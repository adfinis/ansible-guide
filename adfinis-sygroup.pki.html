<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ROLE PKI &mdash; Ansible Guide</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/adsy.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=f2a433a1"></script>
        <script src="_static/doctools.js?v=888ff710"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="ROLE POSTFIX" href="adfinis-sygroup.postfix.html" />
    <link rel="prev" title="ROLE PKG_MIRROR" href="adfinis-sygroup.pkg_mirror.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Ansible Guide
          </a>
              <div class="version">
                1.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="styling_guide.html">Styling Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="roles.html">Roles</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="role_overview.html">Role Overview</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="adfinis-sygroup.ansible.html">ROLE ANSIBLE</a></li>
<li class="toctree-l2"><a class="reference internal" href="adfinis-sygroup.apache.html">ROLE APACHE</a></li>
<li class="toctree-l2"><a class="reference internal" href="adfinis-sygroup.azure_linux_image.html">ROLE AZURE LINUX IMAGE</a></li>
<li class="toctree-l2"><a class="reference internal" href="adfinis-sygroup.console.html">Default values</a></li>
<li class="toctree-l2"><a class="reference internal" href="adfinis-sygroup.docker.html">Default values</a></li>
<li class="toctree-l2"><a class="reference internal" href="adfinis-sygroup.epel.html">Default values</a></li>
<li class="toctree-l2"><a class="reference internal" href="adfinis-sygroup.firewalld.html">ROLE firewalld</a></li>
<li class="toctree-l2"><a class="reference internal" href="adfinis-sygroup.gitlab_runner.html">ROLE GITLAB_RUNNER</a></li>
<li class="toctree-l2"><a class="reference internal" href="adfinis-sygroup.graphite.html">ROLE GRAPHITE</a></li>
<li class="toctree-l2"><a class="reference internal" href="adfinis-sygroup.groups.html">ROLE GROUPS</a></li>
<li class="toctree-l2"><a class="reference internal" href="adfinis-sygroup.grub.html">ROLE GRUB</a></li>
<li class="toctree-l2"><a class="reference internal" href="adfinis-sygroup.hostname.html">ROLE HOSTNAME</a></li>
<li class="toctree-l2"><a class="reference internal" href="adfinis-sygroup.hw_vm_tools.html">ROLE HW_VM_TOOLS</a></li>
<li class="toctree-l2"><a class="reference internal" href="adfinis-sygroup.hwraid.html">ROLE HWRAID</a></li>
<li class="toctree-l2"><a class="reference internal" href="adfinis-sygroup.icinga2_agent.html">Default values</a></li>
<li class="toctree-l2"><a class="reference internal" href="adfinis-sygroup.icinga2_client.html">Default values</a></li>
<li class="toctree-l2"><a class="reference internal" href="adfinis-sygroup.icinga2_master.html">Default values</a></li>
<li class="toctree-l2"><a class="reference internal" href="adfinis-sygroup.icinga2_web.html">ROLE ICINGA2_WEB</a></li>
<li class="toctree-l2"><a class="reference internal" href="adfinis-sygroup.ipmi.html">ROLE IPMI</a></li>
<li class="toctree-l2"><a class="reference internal" href="adfinis-sygroup.iptables.html">ROLE IPTABLES</a></li>
<li class="toctree-l2"><a class="reference internal" href="adfinis-sygroup.isc_dhcp_server.html">Default values</a></li>
<li class="toctree-l2"><a class="reference internal" href="adfinis-sygroup.libvirt.html">Default values</a></li>
<li class="toctree-l2"><a class="reference internal" href="adfinis-sygroup.mariadb.html">Default values</a></li>
<li class="toctree-l2"><a class="reference internal" href="adfinis-sygroup.motd.html">ROLE MOTD</a></li>
<li class="toctree-l2"><a class="reference internal" href="adfinis-sygroup.network.html">ROLE NETWORK</a></li>
<li class="toctree-l2"><a class="reference internal" href="adfinis-sygroup.nginx.html">ROLE NGINX</a></li>
<li class="toctree-l2"><a class="reference internal" href="adfinis-sygroup.nodejs.html">ROLE NODEJS</a></li>
<li class="toctree-l2"><a class="reference internal" href="adfinis-sygroup.ntp.html">Default values</a></li>
<li class="toctree-l2"><a class="reference internal" href="adfinis-sygroup.openshift_backup.html">ROLE openshift_backup</a></li>
<li class="toctree-l2"><a class="reference internal" href="adfinis-sygroup.php_fpm.html">ROLE PHP_FPM</a></li>
<li class="toctree-l2"><a class="reference internal" href="adfinis-sygroup.pkg_mirror.html">ROLE PKG_MIRROR</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">ROLE PKI</a></li>
<li class="toctree-l2"><a class="reference internal" href="adfinis-sygroup.postfix.html">ROLE POSTFIX</a></li>
<li class="toctree-l2"><a class="reference internal" href="adfinis-sygroup.redis.html">ROLE REDIS</a></li>
<li class="toctree-l2"><a class="reference internal" href="adfinis-sygroup.rpcbind.html">ROLE RPCBIND</a></li>
<li class="toctree-l2"><a class="reference internal" href="adfinis-sygroup.rsyslog.html">ROLE RSYSLOG</a></li>
<li class="toctree-l2"><a class="reference internal" href="adfinis-sygroup.snmp.html">ROLE SNMP</a></li>
<li class="toctree-l2"><a class="reference internal" href="adfinis-sygroup.sqlite.html">ROLE SQLITE</a></li>
<li class="toctree-l2"><a class="reference internal" href="adfinis-sygroup.ssh.html">ROLE SSH</a></li>
<li class="toctree-l2"><a class="reference internal" href="adfinis-sygroup.systemd_journald.html">Default values</a></li>
<li class="toctree-l2"><a class="reference internal" href="adfinis-sygroup.telegraf.html">ROLE TELEGRAF</a></li>
<li class="toctree-l2"><a class="reference internal" href="adfinis-sygroup.upgrade.html">ROLE UPGRADE</a></li>
<li class="toctree-l2"><a class="reference internal" href="adfinis-sygroup.users.html">Default values</a></li>
<li class="toctree-l2"><a class="reference internal" href="adfinis.repo_mirror.html">Default values</a></li>
<li class="toctree-l2"><a class="reference internal" href="ansible-role-systemd.html">Default values</a></li>
<li class="toctree-l2"><a class="reference internal" href="robertdebock.bootstrap.html">Default values</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Ansible Guide</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="role_overview.html">Role Overview</a></li>
      <li class="breadcrumb-item active">ROLE PKI</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/adfinis-sygroup.pki.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="role-pki">
<h1>ROLE PKI<a class="headerlink" href="#role-pki" title="Link to this heading"></a></h1>
<a class="reference external image-reference" href="https://github.com/adfinis-sygroup/ansible-role-pki/blob/master/LICENSE"><img alt="https://img.shields.io/github/license/adfinis-sygroup/ansible-role-pki.svg?style=flat-square" src="https://img.shields.io/github/license/adfinis-sygroup/ansible-role-pki.svg?style=flat-square" /></a>
<a class="reference external image-reference" href="https://github.com/adfinis-sygroup/ansible-role-pki"><img alt="https://img.shields.io/travis/adfinis-sygroup/ansible-role-pki.svg?style=flat-square" src="https://img.shields.io/travis/adfinis-sygroup/ansible-role-pki.svg?style=flat-square" /></a>
<a class="reference external image-reference" href="https://galaxy.ansible.com/adfinis-sygroup/pki"><img alt="https://img.shields.io/badge/galaxy-adfinis--sygroup.pki-660198.svg?style=flat-square" src="https://img.shields.io/badge/galaxy-adfinis--sygroup.pki-660198.svg?style=flat-square" /></a>
<p>A brief description of the role goes here.</p>
<section id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Link to this heading"></a></h2>
<p>Any pre-requisites that may not be covered by Ansible itself or the role
should be mentioned here. For instance, if the role uses the EC2 module, it
may be a good idea to mention in this section that the boto package is required.</p>
</section>
<section id="role-variables">
<h2>Role Variables<a class="headerlink" href="#role-variables" title="Link to this heading"></a></h2>
<p>A description of the settable variables for this role should go here, including
any variables that are in defaults/main.yml, vars/main.yml, and any variables
that can/should be set via parameters to the role. Any variables that are read
from other roles and/or the global scope (ie. hostvars, group vars, etc.)
should be mentioned here as well.</p>
</section>
<section id="dependencies">
<h2>Dependencies<a class="headerlink" href="#dependencies" title="Link to this heading"></a></h2>
<p>A list of other roles hosted on Galaxy should go here, plus any details in
regards to parameters that may need to be set for other roles, or variables
that are used from other roles.</p>
</section>
<section id="example-playbook">
<h2>Example Playbook<a class="headerlink" href="#example-playbook" title="Link to this heading"></a></h2>
<p>Including an example of how to use your role (for instance, with variables
passed in as parameters) is always nice for users too:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">hosts</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">servers</span>
<span class="w">  </span><span class="nt">roles</span><span class="p">:</span>
<span class="w">     </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> role</span><span class="p">:</span><span class="w"> </span><span class="nv">adfinis-sygroup.pki</span><span class="w"> </span><span class="p p-Indicator">}</span>
</pre></div>
</div>
</section>
<section id="license">
<h2>License<a class="headerlink" href="#license" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/adfinis-sygroup/ansible-role-pki/blob/master/LICENSE">GPL-3.0</a></p>
</section>
<section id="author-information">
<h2>Author Information<a class="headerlink" href="#author-information" title="Link to this heading"></a></h2>
<p>pki role was written by:</p>
<ul class="simple">
<li><p>Adfinis SyGroup AG | <a class="reference external" href="https://www.adfinis-sygroup.ch/">Website</a> | <a class="reference external" href="https://twitter.com/adfinissygroup">Twitter</a> | <a class="reference external" href="https://github.com/adfinis-sygroup">GitHub</a></p></li>
</ul>
</section>
<section id="default-values">
<h2>Default values<a class="headerlink" href="#default-values" title="Link to this heading"></a></h2>
<p>The bit size of the diffie-hellman parameter.</p>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="nt">pki_dhparam_bits</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4096</span>
</pre></div>
</div>
<p>The file for the diffie-hellman parameter.</p>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="nt">pki_dhparam_file</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;/etc/ssl/dh{{</span><span class="nv"> </span><span class="s">pki_dhparam_bits</span><span class="nv"> </span><span class="s">}}.pem&#39;</span>
</pre></div>
</div>
<p>Backup system and path for certificates and keys.
The tasks will be delegated to this system.</p>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="nt">pki_backup</span><span class="p">:</span>
<span class="w">  </span><span class="nt">system</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="w">  </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>
</pre></div>
</div>
<p>A list of all domains for which certificates should exist.</p>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="nt">pki_domains</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
</pre></div>
</div>
<p>Alt DNS entries can be added as well, e.g.</p>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="nt">pki_domains</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">cert</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">www.example.com</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">cert</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mail.example.com</span>
<span class="w">    </span><span class="nt">alt</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">imap.example.com</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">smtp.example.com</span>
</pre></div>
</div>
<p>Certificates and keys to backup.
Domain names within the <code class="docutils literal notranslate"><span class="pre">pki_directory</span></code> directory to backup.</p>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="nt">pki_backup_domains</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
</pre></div>
</div>
<p>A possible list looks like this:</p>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="nt">pki_backup_domains</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">www.example.org</span>
</pre></div>
</div>
<p>This will backup the following files:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">/etc/ssl/private/www.example.org/privkey.pem</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/etc/ssl/private/www.example.org/cert.pem</span></code></p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="adfinis-sygroup.pkg_mirror.html" class="btn btn-neutral float-left" title="ROLE PKG_MIRROR" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="adfinis-sygroup.postfix.html" class="btn btn-neutral float-right" title="ROLE POSTFIX" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Adfinis AG.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>